(function(){var t=[].slice;this.rockauth=function(){function r(){}return riot.observable(r),r.data=rocketmade.data,r.url=function(t){return t&&(this.url.value=t.replace(/\/$/,"")),this.url.value},r.client_id=function(t){return t&&(this.client_id.value=t),this.client_id.value},r.client_secret=function(t){return t&&(this.client_secret.value=t),this.client_secret.value},r.authentication=function(t){return this.session(t.authentications[0]),this.user(t.users[0])},r.session=function(t){return t&&(this.token(t.token),this.data.set("rockauth:session",t)),this.data.get("rockauth:session")},r.user=function(t){return t&&this.data.set("rockauth:user",t),this.data.get("rockauth:user")},r.token=function(t){return t&&this.data.set("rockauth:token",t),this.data.get("rockauth:token")},r.config=function(t){return r.url(t.api.url),console.log('set url to "'+t.api.url+'"'),r.client_id(t.api.client_id),r.client_secret(t.api.client_secret),t},r.forgot_password=function(t){return new rocketmade.promise(function(r){return function(e,o){return rocketmade.http.post(r.url()+"/passwords/forgot",{user:{username:t}}).then(function(t){return e(t)})["catch"](function(t){return o(t)})}}(this))},r.authenticate_with_password=function(t){return null==t&&(t={}),new rocketmade.promise(function(e){return function(o,n){return rocketmade.http.post(e.url()+"/authentications",{authentication:{auth_type:"password",client_id:e.client_id(),client_secret:e.client_secret(),username:t.username,password:t.password}}).then(function(t){return r.authentication(t.json()),o(t)})["catch"](function(t){return n(t)})}}(this))},r.reset_password=function(t){return null==t&&(t={}),new rocketmade.promise(function(r){return function(e,o){return rocketmade.http.post(r.url()+"/passwords/reset",{user:{password_reset_token:t.reset_token,password:t.new_password}}).then(function(t){return e(t)})["catch"](function(t){return o(t)})}}(this))},r.sideload=new(function(){function r(){}return r.prototype.load=function(r){var e,o;for(e in r)o=r[e],this.set.apply(this,[e].concat(t.call(o)));return this},r.prototype.set=function(){var r,e,o,n,a,s;for(e=arguments[0],a=2<=arguments.length?t.call(arguments,1):[],s=[],r=0,o=a.length;o>r;r++)n=a[r],s.push((null!=this[e]?this[e]:this[e]={})[n.id]=n);return s},r}()),r}()}).call(this),riot.tag2("rockauth-forgot-password",'<rocketmade-forgot-password name="{name}"></rocketmade-forgot-password>',"","",function(t){(function(){this.name=this.opts.name||"forgot-password",rocketmade.on(this.name+":submit",function(t){return function(r){return rockauth.forgot_password(r.email).then(function(r){return console.log(r.flash()),rockauth.trigger(t.name+":pass",r)})["catch"](function(r){return console.log(r.flash()),rockauth.trigger(t.name+":fail",r)})}}(this)),rockauth.on(this.name+":fail",function(t){return function(r){return rocketmade.trigger(t.name+":errors",r.validation_errors())}}(this))}).call(this)},"{ }"),riot.tag2("rockauth-login",'<rocketmade-login name="{name}" show_forgot="{show_forgot}"></rocketmade-login>',"","",function(t){(function(){this.name=this.opts.name||"rockauth:login",this.show_forgot=""===this.opts.show_forgot||this.opts.show_forgot||!1,rocketmade.on(this.name+":submit",function(t){return function(r){return rockauth.authenticate_with_password(r).then(function(r){return rockauth.trigger(t.name+":pass",r)})["catch"](function(r){return rockauth.trigger(t.name+":fail",r)})}}(this)),rockauth.on(this.name+":fail",function(t){return function(r){return console.log(r.flash()),rocketmade.trigger(t.name+":errors",r.validation_errors())}}(this)),rocketmade.on("forgot-password:clicked",function(t){return function(){return rockauth.trigger(t.name+":forgot-password")}}(this))}).call(this)},"{ }"),riot.tag2("rockauth-reset-password",'<rocketmade-center> <rocketmade-form name="{parent.name}"> <rocketmade-input name="password" type="password" placeholder="Password" require></rocketmade-input> <rocketmade-input name="confirm_password" type="password" placeholder="Confirm Password" require></rocketmade-input> <rocketmade-submit label="Change Password"></rocketmade-submit> </rocketmade-form> </rocketmade-center>','rockauth-reset-password rocketmade-form,[riot-tag="rockauth-reset-password"] rocketmade-form { display: block; margin: auto; padding: 3em; max-width: 30rem; text-align: left; }',"",function(t){(function(){this.name=this.opts.name||"reset-password",rocketmade.on(this.name+":submit",function(t){return function(r){return r.password===r.confirm_password?rockauth.reset_password({reset_token:riot.route.query().token,new_password:r.password}).then(function(r){return console.log(r.flash()),rockauth.trigger(t.name+":success",r)})["catch"](function(r){return console.log(r.flash()),rockauth.trigger(t.name+":failure",r),rocketmade.trigger(t.name+":errors",r.validation_errors())}):rocketmade.trigger(t.name+":errors",{confirm_password:"Passwords must match."})}}(this))}).call(this)},"{ }"),riot.tag2("rockauth-test","<rocketmade-app> <rockauth-login></rockauth-login> </rocketmade-app>","","",function(t){(function(){rockauth.url("http://localhost:3010/api"),rockauth.client_id("jkmCq3jukIA16uQyAUVWkA"),rockauth.client_secret("rKrbQSqUWgWyMRXN2PJQeHDP0E3KzRJRAasKSoI2Yvw")}).call(this)});