(function(){var t=[].slice;this.rockauth=function(){function n(){}return riot.observable(n),n.data=rocketmade.data,n.url=function(t){return t&&(this.url.value=t.replace(/\/$/,"")),this.url.value},n.client_id=function(t){return t&&(this.client_id.value=t),this.client_id.value},n.client_secret=function(t){return t&&(this.client_secret.value=t),this.client_secret.value},n.authentication=function(t){return this.session(t.authentications[0]),this.user(t.users[0])},n.session=function(t){return t&&(this.token(t.token),this.data.set("rockauth:session",t)),this.data.get("rockauth:session")},n.user=function(t){return t&&this.data.set("rockauth:user",t),this.data.get("rockauth:user")},n.token=function(t){return t&&this.data.set("rockauth:token",t),this.data.get("rockauth:token")},n.config=function(t){return n.url(t.api.url),n.client_id(t.api.client_id),n.client_secret(t.api.client_secret),t},n.forgot_password=function(t){return new rocketmade.promise(function(n){return function(r,e){return rocketmade.http.post(n.url()+"/passwords/forgot",{user:{username:t}}).then(function(t){return r(t.meta.message)})["catch"](function(t){return e(t.error.message)})}}(this))},n.authenticate_with_password=function(t){return null==t&&(t={}),new rocketmade.promise(function(r){return function(e,o){return rocketmade.http.post(r.url()+"/authentications",{authentication:{auth_type:"password",client_id:r.client_id(),client_secret:r.client_secret(),username:t.email,password:t.password}}).then(function(t){return n.authentication(t),e(t)})["catch"](function(t){return o(t)})}}(this))},n.sideload=new(function(){function n(){}return n.prototype.load=function(n){var r,e;for(r in n)e=n[r],this.set.apply(this,[r].concat(t.call(e)));return this},n.prototype.set=function(){var n,r,e,o,i,a;for(r=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],a=[],n=0,e=i.length;e>n;n++)o=i[n],a.push((null!=this[r]?this[r]:this[r]={})[o.id]=o);return a},n}()),n}()}).call(this),riot.tag2("rockauth-forgot-password",'<rocketmade-forgot-password name="{name}"></rocketmade-forgot-password>',"","",function(t){(function(){this.name=this.opts.name||"forgot-password",rocketmade.on(this.name+":submit",function(t){return function(n){return rockauth.forgot_password(n.email).then(function(n){return alert(n),rockauth.trigger(t.name+":pass",json)})["catch"](function(n){return alert(n),rockauth.trigger(t.name+":fail",json)})}}(this)),rockauth.on(this.name+":fail",function(t){return function(n){return rocketmade.trigger(t.name+":errors",n)}}(this))}).call(this)},"{ }"),riot.tag2("rockauth-login",'<rocketmade-login name="{name}" show_forgot="{show_forgot}"></rocketmade-login>',"","",function(t){(function(){this.name=this.opts.name||"rockauth:login",this.show_forgot=""===this.opts.show_forgot||this.opts.show_forgot||!1,rocketmade.on(this.name+":submit",function(t){return function(n){return rockauth.authenticate_with_password(n).then(function(n){return rockauth.trigger(t.name+":pass",n)})["catch"](function(n){return rockauth.trigger(t.name+":fail",n)})}}(this)),rockauth.on(this.name+":fail",function(t){return function(n){return rocketmade.trigger(t.name+":errors",n)}}(this)),rocketmade.on("forgot-password:clicked",function(t){return function(){return rockauth.trigger(t.name+":forgot-password")}}(this))}).call(this)},"{ }"),riot.tag2("rockauth-test","<rocketmade-app> <rockauth-login></rockauth-login> </rocketmade-app>","","",function(t){(function(){rockauth.url("http://localhost:3010/api"),rockauth.client_id("jkmCq3jukIA16uQyAUVWkA"),rockauth.client_secret("rKrbQSqUWgWyMRXN2PJQeHDP0E3KzRJRAasKSoI2Yvw")}).call(this)});